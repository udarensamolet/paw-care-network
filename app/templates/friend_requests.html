{% extends "_layout.html" %}
{% block content %}
<div class="container">
    <div class="card" style="max-width:1100px">
        <h1 style="margin:0;color:var(--blue)">Friends’ open requests</h1>
        <p class="help">Browse your friends’ open care requests and apply with note/partial dates.</p>
    </div>

    <div class="card" style="max-width:1100px">
        {% if rows %}
        <div class="requests-grid">
            {% for r in rows %}
            <div class="request-card">
                <div class="row">
                    <span class="when">{{ r.start_at }} → {{ r.end_at }}</span>
                    <span class="chip open">Open</span>
                </div>

                <div class="row">
                    {% if r.pet and r.pet.name %}
                    <span class="pet-pill">Pet: {{ r.pet.name }}</span>
                    {% elif r.pet_id %}
                    <span class="pet-pill">Pet #{{ r.pet_id }}</span>
                    {% endif %}
                    {% if r.location_text %}
                    <span class="where">• {{ r.location_text }}</span>
                    {% endif %}
                </div>

                {% if r.notes %}
                <div class="help" style="max-width:70ch">{{ r.notes }}</div>
                {% endif %}

                <div class="req-actions">
                    <a class="btn" href="{{ url_for('matching.apply_request', req_id=r.id) }}">Apply</a>
                </div>
            </div>
            {% endfor %}
        </div>
        {% else %}
        <p class="help">No open requests from your friends right now.</p>
        {% endif %}
    </div>
</div>
{% endblock %}