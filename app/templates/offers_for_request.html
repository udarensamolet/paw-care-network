{% extends "_layout.html" %}
{% block content %}
<h1>Offers for request #{{ req.id }}</h1>
<p><strong>When:</strong> {{ req.start_at }} → {{ req.end_at }}</p>
<ul>
    {% for o in rows %}
    <li>
        Offer #{{ o.id }} — sitter #{{ o.sitter_id }} — status: {{ o.status }}
        {% if o.status == 'offered' %}
        <form method="post" action="{{ url_for('offers.offer_accept', offer_id=o.id) }}" style="display:inline">
            {{ accept_forms[o.id].csrf_token }}
            <button type="submit">Accept</button>
        </form>
        <form method="post" action="{{ url_for('offers.offer_decline', offer_id=o.id) }}" style="display:inline">
            {{ decline_forms[o.id].csrf_token }}
            <button type="submit">Decline</button>
        </form>
        {% endif %}
        {% if o.message %}<div><em>{{ o.message }}</em></div>{% endif %}
    </li>
    {% else %}
    <li>No offers yet.</li>
    {% endfor %}
</ul>
<p><a href="{{ url_for('schedule.care_list') }}">Back to Care Requests</a></p>
{% endblock %}